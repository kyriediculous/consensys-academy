(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"6f60":function(t,e,r){"use strict";var a=r("b737"),n=r.n(a);n.a},7277:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[!0===t.loggedIn?r("div",[r("div",{staticClass:"row"},[r("Purchases")],1),r("div",{staticClass:"row"},[r("Staking")],1),r("div",{staticClass:"row"},[r("Storefront")],1)]):t._e(),r("b-modal",{staticClass:"text-center",attrs:{title:"Connect to your dashboard",centered:"","hide-footer":"","no-close-on-backdrop":"","no-close-on-esc":""},on:{hidden:function(e){return t.hideModal()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("div",{staticClass:"d-block"},[!1===t.loggedIn?r("UportLoginButton",{nativeOn:{click:function(e){t.connectModal=!1}}}):t._e(),!1===t.loggedIn?r("MetamaskConnect"):t._e()],1)])],1)},n=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[t._m(0),t.pageLoad?r("div",{staticClass:"text-center"},[r("b-spinner",{staticClass:"my-5",attrs:{variant:"primary",small:""}})],1):r("div",[null===t.error?r("div",{staticClass:"row"},[r("Staked"),r("Treshold"),r("AddStake"),r("RemoveStake")],1):r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("b-alert",{attrs:{show:"string"===typeof t.error,variant:"warning"},domProps:{innerHTML:t._s(t.error)}})],1)])])])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row my-5"},[r("h1",[t._v("\n            Manage Stake\n        ")])])}],o=r("795b"),c=r.n(o),l=(r("ac6a"),r("5df3"),r("7f7f"),r("96cf"),r("3b8d")),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-12 col-lg-6"},[r("div",[r("strong",[t._v("Current Stake: "+t._s(t.staked)+" "+t._s(t.token.symbol)+" ")])]),r("div")])},d=[],m={name:"staking-staked",computed:{staked:function(){return this.$store.getters["staking/STAKED"]},token:function(){return this.$store.getters["staking/TOKEN"]}}},p=m,h=r("2877"),g=Object(h["a"])(p,u,d,!1,null,"3e246618",null),b=g.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-12 col-lg-6"},[r("div",[r("strong",[t._v("Stake required: "+t._s(t.treshold)+" "+t._s(t.token.symbol))])]),r("div")])},k=[],v={name:"staking-treshold",computed:{treshold:function(){return this.$store.getters["marketplace/PUBLISHER_TRESHOLD"]},token:function(){return this.$store.getters["staking/TOKEN"]}}},y=v,_=Object(h["a"])(y,f,k,!1,null,"706e5774",null),w=_.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12 col-lg-4 offset-lg-2 my-5"},[r("b-button",{attrs:{disabled:!0===t.loading,variant:"primary"},on:{click:function(e){t.confirm=!t.confirm}}},[!1===t.loading?r("span",[t._v("Add Stake")]):t._e(),!0===t.loading?r("b-spinner",{attrs:{variant:"light",small:""}}):t._e()],1),r("b-modal",{attrs:{"ok-title":"Stake","ok-variant":"success"},on:{ok:t.addStake},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[r("p",[t._v("\n            Are you sure you want to stake "+t._s(t.treshold)+" tokens ?\n        ")])])],1)},$=[],S=r("d815"),C={name:"staking-add-stake",computed:{treshold:function(){return this.$store.getters["marketplace/PUBLISHER_TRESHOLD"]},token:function(){return this.$store.getters["staking/TOKEN"]}},data:function(){return{loading:!1,confirm:!1}},methods:{addStake:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(S["a"])(10,this.$store.state.auth.type);case 4:return t.next=6,this.$store.dispatch("staking/STAKED");case 6:this.loading=!1,this.$root.$emit("alert",{countdown:5,color:"success",message:"Succesfully staked 10 tokens"}),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1,this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 14:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.loading=!1,this.confirm=!1}}},E=C,L=Object(h["a"])(E,x,$,!1,null,"71cb2d6e",null),I=L.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12 col-lg-4 my-5"},[r("b-button",{attrs:{disabled:!0===t.loading,variant:"primary"},on:{click:function(e){t.confirm=!t.confirm}}},[!1===t.loading?r("span",[t._v("UnStake")]):t._e(),!0===t.loading?r("b-spinner",{attrs:{variant:"light",small:""}}):t._e()],1),r("b-modal",{attrs:{"ok-title":"Unstake","ok-variant":"warning"},on:{ok:t.unstake},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[r("p",[t._v("\n            Are you sure you want to UNstake "+t._s(t.staked)+" tokens ?\n            You will not be able to create listings anymore.\n            Your listings will no longer be visible and purchasable.\n        ")])])],1)},T=[],O={name:"staking-unstake",computed:{staked:function(){return this.$store.getters["staking/STAKED"]},token:function(){return this.$store.getters["staking/TOKEN"]}},data:function(){return{loading:!1,confirm:!1}},methods:{unstake:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(S["d"])(10,this.$store.state.auth.type);case 4:return t.next=6,this.$store.dispatch("staking/STAKED");case 6:this.loading=!1,this.$root.$emit("alert",{countdown:5,color:"success",message:"Succesfully UNstaked 10 tokens"}),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1,this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 14:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.loading=!1,this.confirm=!1}}},P=O,M=Object(h["a"])(P,R,T,!1,null,"6b05b60c",null),j=M.exports,A={name:"staking",components:{AddStake:I,RemoveStake:j,Staked:b,Treshold:w},data:function(){return{pageLoad:!0,error:null}},created:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.$store.state.marketplace.publisherTreshold&&this.$store.state.staking.staked&&""!==this.$store.state.staking.token.name){t.next=6;break}return t.next=4,c.a.all([this.$store.dispatch("staking/TOKEN"),this.$store.dispatch("marketplace/PUBLISHER_TRESHOLD"),this.$store.dispatch("staking/STAKED")]);case 4:t.next=9;break;case 6:this.$store.dispatch("staking/TOKEN"),this.$store.dispatch("marketplace/PUBLISHER_TRESHOLD"),this.$store.dispatch("staking/STAKED");case 9:this.pageLoad=!1,t.next=23;break;case 12:t.prev=12,t.t0=t["catch"](0),this.pageLoad=!1,this.error=t.t0.message,t.t1=t.t0.message,t.next="contract not deployed"===t.t1?19:21;break;case 19:return this.error="Staking contract not deployed on the selected network. Please make sure you have the <b> Rinkeby </b> network selected in Metamask",t.abrupt("break",23);case 21:return this.error=t.t0.message,t.abrupt("break",23);case 23:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}()},U=A,D=Object(h["a"])(U,i,s,!1,null,"4a86e204",null),N=D.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[t._m(0),r("div",{staticClass:"row"},[r("MyListings"),r("CreateListing")],1)])},B=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row my-5"},[r("h1",[t._v("\n               Manage Your Listings\n           ")])])}],K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("b-row",[r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Search Title"}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Type title to search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),r("b-input-group-append",[r("b-button",{attrs:{disabled:!t.search},on:{click:function(e){t.search=null}}},[t._v("\n                            Clear\n                        ")])],1)],1)],1)],1),r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("div",{staticClass:"text-center"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.$root.$emit("createListing",!0)}}},[t._v("Create New Listing ")])],1)])],1),r("b-table",{attrs:{hover:"","show-empty":"",items:t.listings,busy:t.loading,fields:t.fields,filter:t.search},scopedSlots:t._u([{key:"empty",fn:function(e){return[r("div",{staticClass:"text-center text-muted my-2"},[r("b-alert",{attrs:{show:"string"===typeof t.error,variant:"warning"},domProps:{innerHTML:t._s(t.error)}}),!1===t.error?r("strong",[t._v("No listings found...")]):t._e()],1)]}},{key:"image",fn:function(t){return[r("img",{attrs:{src:t.item.image,height:"32",width:"20"}})]}},{key:"id",fn:function(e){return[r("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.value}},[r("a",{attrs:{href:e.item.manifest,target:"_blank"}},[t._v(t._s(e.item.manifestHash.substring(0,8)+"...")+" ")])])]}},{key:"active",fn:function(e){return[t._v("\n           "+t._s(!0===e.value?"Active":"Inactive")+"\n         ")]}},{key:"price",fn:function(e){return[t._v("\n           "+t._s(parseInt(e.value).toFixed(3))),r("strong",[t._v(t._s(e.item.token.symbol))])]}},{key:"actions",fn:function(e){return[r("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(r){return t.$root.$emit("editListingModal",e.item.id)}}},[t._v("\n                 Edit\n             ")])]}}])},[r("div",{staticClass:"text-center text-muted my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[r("strong",[t._v("Loading...")]),r("br"),r("b-spinner",{attrs:{variant:"primary",small:""}})],1)]),r("EditListing")],1)},G=[],Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.listing?r("b-modal",{attrs:{centered:"",title:"Update Listing - "+t.listing.title+" by "+t.listing.author,size:"xl","hide-footer":""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{staticClass:"my-3"},[r("h4",[t._v("\n                Change Status\n            ")]),r("div",{staticClass:"my-3"},[!0===this.listing.active?r("b-button",{attrs:{variant:"warning"},on:{click:t.changeStatus}},[!1===this.updateStatus.loading?r("span",[t._v("Make Inactive")]):r("b-spinner",{attrs:{variant:"light",small:""}})],1):r("b-button",{attrs:{variant:"success"},on:{click:t.changeStatus}},[!1===this.updateStatus.loading?r("span",[t._v("Make Active")]):r("b-spinner",{attrs:{variant:"light",small:""}})],1)],1),"string"===typeof t.updateStatus.error?r("b-alert",{attrs:{variant:"danger"}},[t._v("\n                "+t._s(t.updateStatus.error)+"\n            ")]):t._e()],1),r("div",{staticClass:"my-3"},[r("h4",[t._v("Change pricing")]),r("p",[t._v("Here you can update the price and/or token for your listing")]),r("b-form",{staticClass:"col-lg-8"},[r("b-form-group",{attrs:{id:"price",description:"Set a price and token. Selected token: "+t.tokenInfo.name,label:"Price","label-for":"input-price"}},[r("b-input-group",[r("b-form-input",{attrs:{label:"price",placeholder:"Enter a new price...",type:"number",required:""},model:{value:t.updatePricing.price,callback:function(e){t.$set(t.updatePricing,"price",e)},expression:"updatePricing.price"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"primary"}},[!1===t.tokenInfo.loading?r("span",[t._v(t._s(t.tokenInfo.symbol))]):r("b-spinner",{attrs:{variant:"light",small:""}})],1)],1)],1),r("b-form-input",{staticClass:"my-2",attrs:{state:!t.tokenInfo.error,label:"token",placeholder:"Enter token address...",type:"text",required:""},on:{change:t.getTokenInfo},model:{value:t.updatePricing.token,callback:function(e){t.$set(t.updatePricing,"token",e)},expression:"updatePricing.token"}})],1),r("b-button",{attrs:{variant:"primary"},on:{click:t.changePricing}},[!1===t.updatePricing.loading?r("span",[t._v("Update Pricing")]):r("b-spinner",{attrs:{variant:"light",small:""}}),"string"===typeof t.updatePricing.error?r("b-alert",{attrs:{variant:"danger"}},[t._v("\n                    "+t._s(t.updatePricing.error)+"\n                ")]):t._e()],1)],1)],1),r("div",[r("div",{staticClass:"my-5"},[r("h6",[t._v("Delete Listing")]),r("p",{staticStyle:{"font-size":"11px"}},[t._v("Your listing will only be removed from the current state of the blockchain, it's historical state will still exists as well as the content uploaded to swarm.\n              Only if the content is not accessed on swarm for a prolongued period of time it might be garbage collected and removed (not implemented yet).\n              Deleting listings will make the listing not visible anymore in 'Manage your Listings' and it can not be purchased any longer.\n              In the end it will have the same effect as making the listing inactive minus the visibility in 'Manage your Listings' ")]),r("b-form",{staticClass:"col-lg-6"},[r("b-form-input",{staticClass:"my-2",attrs:{label:"Reason (optional)",placeholder:"Enter a reason for removal (optional)",type:"text"},model:{value:t.remove.reason,callback:function(e){t.$set(t.remove,"reason",e)},expression:"remove.reason"}}),r("b-button",{attrs:{variant:"danger",disabled:t.remove.loading},on:{click:t.remove.loading}},[!1===t.remove.loading?r("span",[t._v("Remove Listing")]):r("b-spinner",{attrs:{variant:"light",small:""}})],1)],1),"string"===typeof t.remove.error?r("b-alert",{staticClass:"my-2",attrs:{variant:"danger"}},[t._v(t._s(t.remove.error))]):t._e()],1)])]):t._e()},q=[],z=r("cebc"),F=r("bccf"),J=r("dbe4"),W={name:"editListing",data:function(){return{showModal:!1,listingId:"",loading:!1,tokenInfo:{name:"",symbol:"",decimals:0,loading:!1,error:null},updatePricing:{price:null,token:null,loading:!1,error:null},updateStatus:{loading:!1,error:null},remove:{loading:!1,error:null,reason:""}}},computed:{listing:function(){return this.$store.getters["marketplace/LISTING_DETAILS"](this.listingId)}},created:function(){var t=this;this.$root.$on("editListingModal",function(e){t.listingId=e,t.showModal=!0,t.updatePricing.price=t.listing.price,t.updatePricing.token=t.listing.token.address,t.tokenInfo=Object(z["a"])({},t.listing.token,{loading:!1,error:null})})},methods:{getTokenInfo:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.tokenInfo.loading=!0,t.t0=z["a"],t.t1={},t.next=6,Object(J["b"])(this.updatePricing.token);case 6:t.t2=t.sent,t.t3={loading:!0,error:null},this.tokenInfo=(0,t.t0)(t.t1,t.t2,t.t3),this.tokenInfo.loading=!1,t.next=15;break;case 12:t.prev=12,t.t4=t["catch"](0),this.tokenInfo={name:"",symbol:"",decimals:0,loading:!1,error:t.t4.message};case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}(),changePricing:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.updatePricing.error=null,this.updatePricing.loading=!0,t.next=5,Object(F["b"])(this.listing.id,this.updatePricing.price,this.updatePricing.token,this.$store.state.auth.type);case 5:return t.next=7,this.$store.dispatch("marketplace/UPDATE_LISTING",this.listingId);case 7:this.updatePricing.loading=!1,this.$root.$emit("alert",{countdown:5,color:"success",message:"Price updated to ".concat(this.updatePricing.price," ").concat(this.tokenInfo.symbol)}),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.updatePricing.loading=!1,this.updatePricing.error=t.t0.message,this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 16:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),changeStatus:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.updateStatus.error=null,this.updateStatus.loading=!0,t.next=5,Object(F["c"])(this.listing.id,this.$store.state.auth.type);case 5:return t.next=7,this.$store.dispatch("marketplace/UPDATE_LISTING",this.listingId);case 7:this.updateStatus.loading=!1,this.$root.$emit("alert",{countdown:5,color:"success",message:"Listing made ".concat(this.listing.active?"active":"inactive")}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),this.updateStatus.loading=!1,this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 15:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),removeListing:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.remove.error=null,this.remove.loading=!0,t.next=5,Object(F["h"])(this.listing.id,this.remove.reason,this.$store.state.auth.type);case 5:return t.next=7,this.$store.dispatch("marketplace/USER_LISTINGS");case 7:this.remove.loading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),this.removeLoading=!1,this.remove.error=t.t0.message,this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 15:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()}},Q=W,V=(r("6f60"),Object(h["a"])(Q,Y,q,!1,null,"5666f8e6",null)),X=V.exports,Z={data:function(){return{error:!1,search:null,loading:!0,fields:[{key:"image",label:"Cover"},{key:"title",label:"Title"},{key:"id",label:"Id"},{key:"active",label:"Status"},{key:"price",label:"Price"},{key:"actions",label:""}]}},computed:{listings:function(){return this.$store.getters["marketplace/USER_LISTINGS"]}},created:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0!==this.$store.state.marketplace.myListings.length){t.next=6;break}return t.next=4,this.$store.dispatch("marketplace/USER_LISTINGS");case 4:t.next=7;break;case 6:this.$store.dispatch("marketplace/USER_LISTINGS");case 7:this.loading=!1,t.next=21;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1,this.error=t.t0.message,t.t1=t.t0.message,t.next="contract not deployed"===t.t1?17:19;break;case 17:return this.error="Staking contract not deployed on the selected network. Please make sure you have the <b> Rinkeby </b> network selected in Metamask",t.abrupt("break",21);case 19:return this.error=t.t0.message,t.abrupt("break",21);case 21:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}(),components:{EditListing:X}},tt=Z,et=Object(h["a"])(tt,K,G,!1,null,"0ac1a13f",null),rt=et.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-modal",{attrs:{centered:"",size:"xl",title:"Create New Listing","ok-title":"Create","ok-variant":"success",busy:t.createLoading},on:{ok:t.createListing,cancel:t.resetForm},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("b-form",[r("b-form-group",{attrs:{id:"ebook",description:"Upload an eBook",label:"eBook file","label-for":"input-ebook"}},[r("b-form-file",{attrs:{"drop-placeholder":"Drop ebook here",placeholder:"Pick a .pdf or .epub file...",accept:".pdf, .epub",state:Boolean(t.create.ebook),required:""},model:{value:t.create.ebook,callback:function(e){t.$set(t.create,"ebook",e)},expression:"create.ebook"}})],1),r("b-form-group",{attrs:{id:"title",description:"What is the book's title?",label:"Title","label-for":"input-title"}},[r("b-form-input",{attrs:{id:"input-title",type:"text",required:""},model:{value:t.create.title,callback:function(e){t.$set(t.create,"title",e)},expression:"create.title"}})],1),r("b-form-group",{attrs:{id:"summary",description:"Enter a short summary",label:"Short Summary","label-for":"input-summary"}},[r("b-form-textarea",{attrs:{id:"input-summary",placeholder:"Enter a short summary",rows:"5","max-rows":"5"},model:{value:t.create.summary,callback:function(e){t.$set(t.create,"summary",e)},expression:"create.summary"}})],1),r("b-form-group",{attrs:{id:"author",description:"Enter author name",label:"Author","label-for":"input-author"}},[r("b-form-input",{attrs:{id:"input-author",type:"text",required:""},model:{value:t.create.author,callback:function(e){t.$set(t.create,"author",e)},expression:"create.author"}})],1),r("b-form-group",{attrs:{id:"image",description:"Choose a book cover",label:"Cover image","label-for":"input-image"}},[r("b-form-file",{attrs:{"drop-placeholder":"Drop file here",placeholder:"Pick an image",accept:"image/*",state:Boolean(t.create.image)},model:{value:t.create.image,callback:function(e){t.$set(t.create,"image",e)},expression:"create.image"}})],1),r("b-form-group",{attrs:{id:"price",description:"Set a price and token. Selected token: "+t.tokenInfo.name,label:"Price","label-for":"input-price"}},[r("b-input-group",[r("b-form-input",{attrs:{label:"price",placeholder:"Enter a price...",type:"number",required:""},model:{value:t.create.price,callback:function(e){t.$set(t.create,"price",e)},expression:"create.price"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"primary"}},[!1===t.tokenInfo.loading?r("span",[t._v(t._s(t.tokenInfo.symbol))]):r("b-spinner",{attrs:{variant:"light",small:""}})],1)],1)],1),r("b-form-input",{staticClass:"my-2",attrs:{state:!t.tokenInfo.error,label:"token",placeholder:"Enter token address...",type:"text",required:""},on:{change:t.getTokenInfo},model:{value:t.create.token,callback:function(e){t.$set(t.create,"token",e)},expression:"create.token"}})],1),r("b-form-group",{attrs:{id:"activate",description:"Activate listing upon creation?",label:"","label-for":"input-activate"}},[r("b-form-checkbox",{attrs:{id:"input-activate"},model:{value:t.create.activate,callback:function(e){t.$set(t.create,"activate",e)},expression:"create.activate"}},[t._v("\n                  Activate my listing on creation.\n              ")])],1)],1)],1)],1)},nt=[],it={data:function(){return{modal:!1,create:{ebook:null,title:"",summary:"",author:"",image:null,price:null,token:"0x46F1A4Dd99bd8D2d6be032C328a54778e1517358",activate:!1},createLoading:!1,tokenInfo:{name:"",symbol:"",decimals:0,loading:!1,error:null}}},created:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.createLoading=!0,t.prev=1,t.next=4,this.getTokenInfo();case 4:this.$root.$on("createListing",function(t){e.modal=!0}),this.createLoading=!1,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message}),this.createLoading=!1;case 12:case"end":return t.stop()}},t,this,[[1,8]])}));function e(){return t.apply(this,arguments)}return e}(),methods:{createListing:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.createLoading=!0,t.prev=1,t.next=4,Object(F["d"])(this.create,this.$store.state.auth.type);case 4:return t.next=6,this.$store.dispatch("marketplace/USER_LISTINGS");case 6:this.createLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),this.createLoading=!1,this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 13:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}(),resetForm:function(){this.create.ebook=null,this.create.title=null,this.create.summary=null,this.create.author=null,this.create.image=null,this.create.price=null,this.create.token="0x31830869C8ea2C267898b3E2323B5862DE61B9Cc",this.modal=!1},getTokenInfo:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.tokenInfo.loading=!0,t.t0=z["a"],t.t1={},t.next=6,Object(J["b"])(this.create.token);case 6:t.t2=t.sent,t.t3={loading:!0,error:null},this.tokenInfo=(0,t.t0)(t.t1,t.t2,t.t3),this.tokenInfo.loading=!1,t.next=15;break;case 12:t.prev=12,t.t4=t["catch"](0),this.tokenInfo={name:"",symbol:"",decimals:0,loading:!1,error:t.t4.message};case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}()}},st=it,ot=Object(h["a"])(st,at,nt,!1,null,"4675f7ec",null),ct=ot.exports,lt={components:{MyListings:rt,CreateListing:ct}},ut=lt,dt=Object(h["a"])(ut,H,B,!1,null,"bdb55e1c",null),mt=dt.exports,pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"my-5"},[r("b-row",[r("h1",[t._v("Purchase History")])]),r("b-row",[r("b-table",{attrs:{hover:"","show-empty":"",items:t.purchases,busy:t.pageLoad,fields:t.fields},scopedSlots:t._u([{key:"empty",fn:function(e){return[r("div",{staticClass:"text-center text-muted my-2"},[r("b-alert",{attrs:{show:"string"===typeof t.error,variant:"warning"},domProps:{innerHTML:t._s(t.error)}}),t.error?t._e():r("strong",[t._v("You haven't made any purchases...")])],1)]}},{key:"image",fn:function(t){return[r("img",{attrs:{src:t.value,height:"32",width:"20"}})]}},{key:"timestamp",fn:function(e){return[t._v("\n             "+t._s(t.$moment(1e3*Number(e.value)).format("DD/MM/YYYY HH:mm"))+"\n         ")]}},{key:"price",fn:function(e){return[t._v("\n                           "+t._s(parseInt(e.value).toFixed(3))),r("strong",[t._v(t._s(e.item.token.symbol))])]}}])},[r("div",{staticClass:"text-center text-muted my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[r("strong",[t._v("Loading...")]),r("br"),r("b-spinner",{attrs:{variant:"primary",small:""}})],1)])],1)],1)},ht=[],gt={name:"purchases",data:function(){return{pageLoad:!0,error:null,fields:[{key:"image",label:"Cover"},{key:"title",label:"Title"},{key:"timestamp",label:"Date"},{key:"price",label:"Price"}]}},computed:{purchases:function(){return this.$store.getters["marketplace/USER_PURCHASES"]}},created:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0!==this.$store.state.marketplace.myPurchases.length){t.next=6;break}return t.next=4,this.$store.dispatch("marketplace/USER_PURCHASES");case 4:t.next=7;break;case 6:this.$store.dispatch("marketplace/USER_PURCHASES");case 7:this.pageLoad=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.pageLoad=!1,this.error=t.t0.message;case 14:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()},bt=gt,ft=Object(h["a"])(bt,pt,ht,!1,null,"1bc3b940",null),kt=ft.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-button",{staticClass:"width-100 my-2 mx-1 text-left",attrs:{variant:"uport",disabled:!0===t.loading,size:"lg",type:"submit"},on:{click:t.login}},[a("img",{staticClass:"mx-1",attrs:{src:r("8a62"),width:"50",height:"50"}}),t._v("  | \n  "),!1===t.loading?a("span",[t._v("Connect with uport")]):t._e(),!0===t.loading?a("b-spinner",{attrs:{variant:"primary",small:""}}):t._e()],1)],1)},yt=[],_t={name:"loginButton",data:function(){return{loading:!1}},computed:{network:function(){return this.$store.getters["network/SELECTED"]}},methods:{login:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("auth/UPORT_LOGIN",this.network);case 4:this.$store.commit("auth/AUTH_TYPE","uport"),this.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}()}},wt=_t,xt=Object(h["a"])(wt,vt,yt,!1,null,"e1ff6698",null),$t=xt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-button",{staticClass:"width-100 my-2 mx-1 text-left",attrs:{variant:"metamask",dark:"",disabled:!0===t.loading||!t.metamaskAvailable,size:"lg",type:"submit"},on:{click:t.connectMetamask}},[a("img",{staticClass:"mx-1",attrs:{src:r("d6c5"),width:"50",height:"50"}}),t._v("  | \n  "),!1===t.loading?a("span",[t._v("Connect with Metamask")]):t._e(),!0===t.loading?a("b-spinner",{attrs:{variant:"primary",small:""}}):t._e()],1),a("b-alert",{attrs:{show:!t.metamaskAvailable,variant:"warning"}},[t._v("\n  MetaMask not detected.\n   "),a("a",{attrs:{href:"https://metamask.io/",target:"_blank"}},[t._v("\n    Download\n   ")]),t._v("\n   The latest version if you wish to use Metamask.\n")])],1)},Ct=[],Et={name:"metamaskConnect",data:function(){return{loading:!1}},computed:{network:function(){return this.$store.getters["network/SELECTED"]},metamaskAvailable:function(){return"undefined"!==typeof window.ethereum}},methods:{connectMetamask:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("auth/METAMASK_CONNECT");case 4:this.$store.commit("auth/AUTH_TYPE","metamask"),this.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$root.$emit("alert",{countdown:5,color:"danger",message:t.t0.message});case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}()}},Lt=Et,It=Object(h["a"])(Lt,St,Ct,!1,null,"0e2c5400",null),Rt=It.exports,Tt={name:"dashboard",components:{Staking:N,Storefront:mt,Purchases:kt,UportLoginButton:$t,MetamaskConnect:Rt},computed:{loggedIn:function(){return this.$store.getters["auth/LOGGED_IN"]},modal:{get:function(){return!this.loggedIn},set:function(t){return t}}},data:function(){return{connectModal:!0}},created:function(){this.loggedIn||(this.connectModal=!0)},methods:{hideModal:function(){this.loggedIn||this.$router.push("/")}}},Ot=Tt,Pt=Object(h["a"])(Ot,a,n,!1,null,"44665b1d",null);e["default"]=Pt.exports},"8a62":function(t,e,r){t.exports=r.p+"img/uport-logo.b348a921.svg"},b737:function(t,e,r){},d6c5:function(t,e,r){t.exports=r.p+"img/metamask.c879a582.svg"}}]);
//# sourceMappingURL=dashboard.58a04311.js.map